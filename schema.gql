# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Profile {
  id: String!
  name: String
  avatar: String
  provider: String!
}

type User {
  id: String!
  name: String
  avatar: String
  locale: Locale!
  createdAt: DateTime!
  updatedAt: DateTime!
  profiles: [Profile!]
}

enum Locale {
  en_US
  ru_RU
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Community {
  id: String!
  name: String!
  title: String!
  avatar: String
  createdAt: DateTime!
  updatedAt: DateTime!
  onlineCount: Float!
}

type Channel {
  id: String!
  name: String!
  title: String!
  state: String
  mode: ChannelMode!
  avatar: String
  createdAt: DateTime!
  updatedAt: DateTime!
  onlineCount: Float!
}

enum ChannelMode {
  WAITLIST_YOUTUBE
  WAITLIST_SPOTIFY
  STREAM_TWITCH
  STREAM_YOUTUBE
  COLLECTION_SPOTIFY
  COLLECTION_YOUTUBE
}

type ChannelMessage {
  id: String!
  content: String!
  channelId: String!
  userId: String!
  user: User!
  createdAt: String!
}

type SpotifyNow {
  id: String!
  imageUrl: String!
  artist: String!
  name: String!
  progress: Float!
}

type WaitlistSpotify {
  id: String!
  trackId: String
  title: String
  artists: String
  cover: String
  duration: Int
  start: String
}

type TwitchStream {
  id: String!
  channelKey: String
}

type Query {
  uniqCount: Int!
  user(id: ID): User
  me: User!
  community(name: String!): Community!
  communities: [Community!]!
  channel(name: String!): Channel!
  channels(name: String!): [Channel!]!
  channelMessages(channelId: ID!): [ChannelMessage!]!
  waitlistSpotify(channelId: String!): WaitlistSpotify!
  spotifyNow(token: String!): SpotifyNow
  spotifyToken: String!
  twitchStream(channelName: String!): TwitchStream!
}

type Mutation {
  logout: Boolean!
  updateConnectionStatus(channel: String, community: String): Boolean!
  setUserLocale(locale: Locale!): Boolean!
  createCommunity(input: CreateCommunityInput!): Community!
  createChannel(input: CreateChannelInput!): Channel!
  createChannelMessage(input: ChannelMessageCreateInput!): Boolean!
  refreshSpotifyToken: String!
}

input CreateCommunityInput {
  name: String!
  title: String!
}

input CreateChannelInput {
  communityId: ID!
  name: String!
  title: String!
  mode: ChannelMode!
}

input ChannelMessageCreateInput {
  content: String!
  channelId: String!
}

type Subscription {
  channelMessageCreated(channelId: ID!): ChannelMessage!
  channelMessageDeleted(channelId: ID!): ChannelMessage!
  waitlistSpotifyUpdated(channelId: String!): WaitlistSpotify!
}
